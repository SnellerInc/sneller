SELECT
  COALESCE(x, y.z, z[0])*3 AS f
FROM
  input
---
{"x": 1, "y": {"z": 2}, "z": [3]}
{"y": {"z": 2}, "z": 3}
{"z": [3, 4]}
{"none": 100}
{"x": "foo"}
{"x": "foo", "y": {"z": 3}}
{"y": [], "z": [1]}
{"x": "foo", "y": null, "z": {"b": 0}}
---
{"f": 3}
{"f": 6}
{"f": 9}
{}
{}
{}
{"f": 3}
{}
